# kafka - kafka broker

description "<%= @daemon_name %> daemon"

start on runlevel [2345]
stop on runlevel [016]

kill signal TERM
kill timeout <%= @kill_timeout %>
<% if @ulimit %>
limit nofile <%= @ulimit %> <%= @ulimit %>
<% end %>
setuid <%= @user %>

script
  if [ -f /etc/default/<%= @daemon_name %> ]; then
    . /etc/default/<%= @daemon_name %>
  fi
  exec $KAFKA_RUN $KAFKA_ARGS $KAFKA_CONFIG
end script

post-start script
  pid="$(status <%= @daemon_name %> | head -1)"
  pid=${pid##* }
  /usr/libexec/kafka/check-running "$pid"
  exit $?
end script
